<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Carl James M. Ayag" />
  <meta name="description" content="View your happiness survey results, track your joy levels over time, and discover patterns in activities that bring you the most happiness" />
  <meta name="keywords" content="HTML, CSS, JavaScript, layout, extension, homepage" />
  <title>Happy Survey Results â€“ Psyche Portfolio</title>
  <link rel="icon" type="image/png" sizes="16x16,32x32" href="images/favicon_io/favicon-32x32.png" />
  <link rel="manifest" href="images/favicon_io/site.webmanifest" />
  <link rel="stylesheet" href="styles/styles.css" media="all" />
  <link rel="stylesheet" href="styles/happy-style.css" />
</head>
<body class="happy-theme">
    <!-- Navigation -->
    <nav id="navigation" role="navigation" aria-label="Primary">
  <div class="nav-container">
    
    <button class="hamburger" id="hamburger-btn" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <ul id="nav-menu">
      <li><a href="index.html">ğŸ Home</a></li>
      <li><a href="survey.html">ğŸ“œSurvey</a></li>
      <li><a href="results.html">ğŸ“ˆResults</a></li>
      <li><a href="index.html#about-us-header">ğŸ“About</a></li>
      <li><a href="contact.html">ğŸ“Contact</a></li>
      <li><a href="media-graphic.html">ğŸ¨Media</a></li>
      <li><a href="Faq.html">â“FAQ</a></li>
    </ul>

  </div>
</nav>

<script>
    const hamburger = document.getElementById('hamburger-btn');
    const navMenu = document.getElementById('nav-menu');

    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });
    
    // Close menu when a link is clicked
    document.querySelectorAll('#nav-menu a').forEach(link => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });
</script>
  <div class="container">
    <h2>Happy Survey Results ğŸ˜Š</h2>
    <p class="subtitle">Your responses have been recorded. Here's a summary of your happiness survey data.</p>

    <!-- Survey Data Display -->
    <div class="results-section">
      <h3>Your Latest Happy Survey Response</h3>
      <div class="result-card" id="latestResponse">
        <p><strong>Loading your latest response...</strong></p>
      </div>
    </div>

    <!-- Survey History -->
    <div class="results-section">
      <h3>Your Happy Survey History</h3>
      <div class="results-grid" id="surveyHistory">
        <p>Loading survey history...</p>
      </div>
    </div>

    <!-- Insights Section -->
    <div class="results-section">
      <h3>Personal Insights</h3>
      <div class="insights-card" id="insights">
        <p>Complete more surveys to see personalized insights here.</p>
      </div>
    </div>

    <!-- Navigation -->
    <div class="emotion-nav">
      <a href="happy.html"><button class="emotion-btn neutral-btn">â† Back to Happy Page</button></a>
      <a href="results.html"><button class="btn">View All Results</button></a>
    </div>
  </div>

  <script>
    function displayHappyResults() {
      try {
        const happyData = JSON.parse(localStorage.getItem('happySurveys') || '[]');

        if (happyData.length === 0) {
          document.getElementById('latestResponse').innerHTML = '<p>No survey responses found. Take the happy survey first!</p>';
          document.getElementById('surveyHistory').innerHTML = '<p>No survey history available.</p>';
          return;
        }

        // Display latest response
        const latest = happyData[happyData.length - 1];
        const latestDate = new Date(latest.timestamp).toLocaleString();

        document.getElementById('latestResponse').innerHTML = `
          <h4>Latest Response - ${latestDate}</h4>
          <p><strong>Happiness Level:</strong> ${latest.happinessLevel}/10</p>
          <p><strong>Positive Emotions:</strong> ${latest.positiveEmotions || 'Not specified'}</p>
          <p><strong>Joy Activities:</strong> ${latest.joyActivities.length > 0 ? latest.joyActivities.join(', ') : 'Not specified'}</p>
          <p><strong>Gratitude Level:</strong> ${latest.gratitude || 'Not specified'}</p>
        `;

        // Display survey history
        const historyContainer = document.getElementById('surveyHistory');
        historyContainer.innerHTML = '';

        // Show last 5 responses
        const recentResponses = happyData.slice(-5).reverse();

        recentResponses.forEach((response, index) => {
          const responseDate = new Date(response.timestamp).toLocaleString();
          const card = document.createElement('div');
          card.className = 'result-card';
          card.innerHTML = `
            <h5>Response #${happyData.length - index} - ${responseDate}</h5>
            <p><strong>Happiness Level:</strong> ${response.happinessLevel}/10</p>
            <p><strong>Positive Emotions:</strong> ${response.positiveEmotions || 'Not specified'}</p>
            <p><strong>Joy Activities:</strong> ${response.joyActivities.length > 0 ? response.joyActivities.join(', ') : 'Not specified'}</p>
          `;
          historyContainer.appendChild(card);
        });

        // Generate insights
        generateHappyInsights(happyData);

      } catch (err) {
        console.error('Error loading happy survey data:', err);
        document.getElementById('latestResponse').innerHTML = '<p>Error loading survey data.</p>';
      }
    }

    function generateHappyInsights(data) {
      if (data.length < 2) {
        document.getElementById('insights').innerHTML = '<p>Complete more surveys to see insights about your happiness patterns.</p>';
        return;
      }

      const insights = [];
      const avgHappiness = data.reduce((sum, d) => sum + d.happinessLevel, 0) / data.length;

      insights.push(`Average happiness level: ${avgHappiness.toFixed(1)}/10`);

      const highHappinessDays = data.filter(d => d.happinessLevel >= 8).length;
      if (highHappinessDays > 0) {
        insights.push(`${highHappinessDays} days with very high happiness levels (8+)`);
      }

      // Analyze joy activities
      const allActivities = data.flatMap(d => d.joyActivities || []);
      if (allActivities.length > 0) {
        const activityCounts = allActivities.reduce((acc, activity) => {
          acc[activity] = (acc[activity] || 0) + 1;
          return acc;
        }, {});

        const mostCommonActivity = Object.entries(activityCounts).sort(([,a], [,b]) => b - a)[0];
        if (mostCommonActivity) {
          insights.push(`Most frequent joy activity: ${mostCommonActivity[0]} (${mostCommonActivity[1]} times)`);
        }
      }

      // Analyze gratitude patterns
      const gratitudeCounts = data
        .map(d => d.gratitude)
        .filter(Boolean)
        .reduce((acc, gratitude) => {
          acc[gratitude] = (acc[gratitude] || 0) + 1;
          return acc;
        }, {});

      if (Object.keys(gratitudeCounts).length > 0) {
        const mostCommonGratitude = Object.entries(gratitudeCounts).sort(([,a], [,b]) => b - a)[0];
        insights.push(`Most common gratitude level: ${mostCommonGratitude[0]} (${mostCommonGratitude[1]} times)`);
      }

      document.getElementById('insights').innerHTML = `
        <h4>Your Happiness Patterns</h4>
        <ul>
          ${insights.map(insight => `<li>${insight}</li>`).join('')}
        </ul>
        <p><em>These insights are based on your survey responses. Continue building positive habits to maintain high happiness levels.</em></p>
      `;
    }

    // Load results on page load
    document.addEventListener('DOMContentLoaded', displayHappyResults);
  </script>

  <!-- Footer Section -->
  <div id="footer" role="contentinfo">
    <p>&#169; 2025 Psyche Analyst Website. All Rights Reserved.</p>
    <p>Author: Carl James M. Ayag</p>
    <p><a href="mailto:cjayag80@gmail.com">cjayag80@gmail.com</a></p>
  </div>
</body>
</html>
